@model CCSHealthFamilyWelfareDept.Models.ILCModel
@{
    ViewBag.Title = "ILCRegistration";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}
<style>
    .modal-dialog label {
        display: block;
        position: relative;
        font-weight: 600;
    }

        .modal-dialog label:after {
            content: ":";
            float: right;
            display: block;
            position: absolute;
            right: 0;
            top: 0;
        }

    .modal-dialog h4 {
        margin: 0;
        color: #09707d;
    }

    .modal-dialog .panel-heading {
        padding: 0 15px 10px;
    }

    .modal-dialog .row {
        margin-bottom: 5px;
    }
</style>
<div class="content-title oldnew" style="display: none">
    <h3 class="main-title">Application For Issuance of Illness Certificate
    </h3>
</div>
<div class="content-title extdata" style="display: none">
    <h3 class="main-title">Application For Issuance of Extended Illness Certificate
    </h3>
</div>
<div id="content" class="dashboard padding-20 margin-bottom-50">
    @using (Html.BeginForm("ILCRegistration", "ILC", FormMethod.Post, new { @id = "frmdata" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default" style="margin-bottom: 5px;">
                    <div class="panel-body" style="padding: 3px 10px">
                        <div class="row">
                            <div class="col-md-12">
                                <strong>Note :-  <span class="text-danger">(i).  All files that will be uploaded should be in .jpg and .pdf format and maximum file size should be 2080 KB (2 MB).</span></strong>
                                <div class="clearfix"></div>
                                <strong>
                                    <span class="text-danger">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ii). Only those applicant can apply for Illness Certificate who have already been treated at Government Hospital/CHC/PHC & having OPD &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receipt.</span>
                                </strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-12 extdata" style="display: none">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <span class="title elipsis">
                            <h4>Old Certificate Number</h4>
                        </span>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Old Certificate Number <span class="star">*</span></label>
                                    @Html.TextBoxFor(m => m.oldCertificateNumber, new { @class = "form-control" })
                                    @Html.ValidationMessageFor(m => m.oldCertificateNumber, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="col-md-2 col-md-offset-3">
                                <label>&nbsp;</label>
                                <input type="button" id="btnSearch" class="btn btn-block btn-primary" value="SEARCH" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class=" oldnew" style="display: none">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Reason For Application</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Reason <span class="star">*</span></label>
                                        @Html.TextAreaFor(m => m.reason, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.reason, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>OPD Receipt Number <span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.opdReceiptno, new { @class = "form-control", tabindex = 2 })
                                        @Html.ValidationMessageFor(m => m.opdReceiptno, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-2 U" style="margin-bottom: 10px; display: none;">
                                    <span>
                                        <label>Upload OPD Reciept <span class="text-danger">*</span></label>
                                    </span>
                                    <div class="fileUpload3">
                                        <span>Upload </span>
                                        @Html.TextBoxFor(m => m.opdFile, new { @class = "upload3", @type = "file", @onchange = "UploadFile(this);" })
                                        @Html.HiddenFor(m => m.opdFilePath)
                                    </div>
                                    @Html.ValidationMessageFor(m => m.opdFile, "", new { @class = "text-danger" })
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group padding-top-30" id="opdFileVALUE" style="display: none;">
                                        <label></label>
                                        @if (Model != null && !string.IsNullOrEmpty(Model.opdFilePath))
                                        {
                                            <a href="@Url.Content(Model.opdFilePath)" class="opdFiledoc" target="_blank"  title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                        else
                                        {
                                            <a href="#" class="opdFiledoc" target="_blank" title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Select Health Unit</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label>Health Unit <span class="text-danger">*</span></label>
                                        <div class="form-control">
                                            @foreach (var type in ViewBag.forwardTypes)
                                            {
                                                <label>
                                                    <input type="radio" name="forwardtypeId" id="forwardtypeId" value="@type.forwardtypeId">
                                                    @type.forwardtypeName
                                                </label>
                                            }

                                        </div>
                                        <label id="lbltype" class="text-danger" style="display: none;">Select Health Unit</label>
                                        <input type="hidden" id="hdnforwardtypeId" name="hdnforwardtypeId" />
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>District&nbsp;<span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(m => m.healthUnitDistrictId, (IEnumerable<SelectListItem>)ViewBag.UPDistrict, "--Select--", new { @class = "form-control", tabindex = "1" })
                                        @Html.ValidationMessageFor(m => m.healthUnitDistrictId, "", new { @class = "text-danger" })
                                        @Html.HiddenFor(m => m.healthUnitDistrictId)
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Hospital Name<span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(m => m.forwardtoId, (IEnumerable<SelectListItem>)ViewBag.forwardTo, "--Select--", new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.forwardtoId, "", new { @class = "text-danger" })
                                        @Html.HiddenFor(m => m.forwardtoId)
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Doctor Name </label>
                                        @Html.TextBoxFor(m => m.doctorName, new { @class = "form-control", tabindex = 8, @placeholder = "Doctor Name" })
                                        @Html.ValidationMessageFor(m => m.doctorName, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Date of Check-up <span class="text-danger">*</span></label>

                                        @Html.TextBoxFor(m => m.opdDate, new { @class = "form-control od", tabindex = 8, @readonly = "true" })
                                        @Html.ValidationMessageFor(m => m.opdDate, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Treatment From <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.treatmentFrom, new { @class = "form-control tf", tabindex = 8, @readonly = "true", @onblur = "calDayDiff();" })
                                        @Html.ValidationMessageFor(m => m.treatmentFrom, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Treatment To <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.treatmentto, new { @class = "form-control tt", tabindex = 8, @readonly = "true", @onblur = "calDayDiff();" })
                                        @Html.ValidationMessageFor(m => m.treatmentto, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>No Of Days For Rest<span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.NoOfDays, new { @class = "form-control", @readonly = "readonly" })
                                        @Html.ValidationMessageFor(m => m.NoOfDays, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Illness Details <span class="star">*</span></label>
                                        @Html.TextAreaFor(m => m.illnessDetail, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.illnessDetail, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Personal Details</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Full Name <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.fullName, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.fullName, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Father’s name <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.fatherName, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.fatherName, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>DOB <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.dob, new { @class = "form-control", tabindex = 8, @readonly = "true" })
                                        @Html.ValidationMessageFor(m => m.dob, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Gender <span class="star">*</span></label>
                                        <div class="form-control" style="padding: 6px 3px">
                                            <label>
                                                <input type="radio" name="rbtnGender" value="Male">Male</label>
                                            <label>
                                                <input type="radio" name="rbtnGender" value="Female">Female</label>
                                            <label>
                                                <input type="radio" name="rbtnGender" value="Transgender">Transgender</label>
                                        </div>
                                        @Html.HiddenFor(m => m.gender)
                                        @Html.HiddenFor(m => m.rbtnGender)
                                        <span id="spanValGender" class="text-danger" style="display: none;">Select Gender</span>
                                    </div>
                                </div>

                                <div class="clearfix"></div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Category <span class="star">*</span></label>
                                        @Html.DropDownListFor(m => m.categoryId, (IEnumerable<SelectListItem>)ViewBag.Category, "--Select--", new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.categoryId, "", new { @class = "text-danger" })
                                        @Html.HiddenFor(m => m.categoryId)
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Mobile No. <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.mobileNo, new { @class = "form-control", @maxlength = "10", @onkeypress = "return isNumberKey(event);" })
                                        @Html.ValidationMessageFor(m => m.mobileNo, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Email Address</label>
                                        @Html.TextBoxFor(m => m.emailId, new { @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.emailId, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Address <span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.opdAddress, new { @class = "form-control", tabindex = 5 })
                                        @Html.ValidationMessageFor(m => m.opdAddress, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>State <span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(m => m.opdStateId, (IEnumerable<SelectListItem>)ViewBag.State, "--Select--", new { tabindex = 7, @class = "form-control" })
                                        @Html.ValidationMessageFor(m => m.opdStateId, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>District <span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(m => m.opdDistrictId, (IEnumerable<SelectListItem>)ViewBag.District, "--Select--", new { @class = "form-control", tabindex = 4 })
                                        @Html.ValidationMessageFor(m => m.opdDistrictId, "", new { @class = "text-danger" })
                                        @Html.HiddenFor(m => m.opdDistrictId)
                                        <input type="hidden" id="hdnDistId" />
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Pincode </label>
                                        @Html.TextBoxFor(m => m.opdPincode, new { @class = "form-control", @maxlength = 6, tabindex = 6, @onkeypress = "return isNumberKey(event);" })
                                        @Html.ValidationMessageFor(m => m.opdPincode, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Mark Of Identification <span class="text-danger">*</span></label>
                                        @Html.TextAreaFor(m => m.markOfIdentification, new { @class = "form-control", tabindex = 6 })
                                        @Html.ValidationMessageFor(m => m.markOfIdentification, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Upload Documents</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">


                                <div class="col-md-4" style="margin-bottom: 10px;">
                                    <div class="form-group">

                                        <label>Photo Id Type <span class="text-danger">*</span></label>
                                        @Html.DropDownListFor(m => m.idTypeId, (IEnumerable<SelectListItem>)ViewBag.IdType, "--Select--", new { @class = "form-control", tabindex = 4 })
                                        @Html.HiddenFor(m => m.idTypeId)
                                        @Html.ValidationMessageFor(m => m.idTypeId, "", new { @class = "text-danger" })

                                    </div>
                                </div>


                                <div class="col-md-4" style="margin-bottom: 10px;">
                                    <div class="form-group">
                                        <label>Photo Id No.<span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.idNumber, new { @class = "form-control", tabindex = 8 })
                                        @Html.ValidationMessageFor(m => m.idNumber, "", new { @class = "text-danger" })
                                    </div>
                                </div>



                                <div class="col-md-2 U" style="margin-bottom: 10px; display: none;">
                                    <label>Upload Photo Id<span class="text-danger">*</span></label>
                                    <div class="fileUpload3">
                                        <span>Upload </span>
                                        @Html.TextBoxFor(m => m.idFile, new { @class = "upload3", @type = "file", @onchange = "UploadFile(this);" })
                                        @Html.HiddenFor(m => m.idFilePath)
                                    </div>
                                    @Html.ValidationMessageFor(m => m.idFile, "", new { @class = "text-danger" })
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group padding-top-10" id="idFileVALUE" style="display: none;">
                                        <label>&nbsp;</label><br>
                                        @if (Model != null && !string.IsNullOrEmpty(Model.idFilePath))
                                        {
                                            <a href="@Url.Content(Model.idFilePath)" class="idFiledoc" target="_blank"  title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                        else
                                        {
                                            <a href="#" class="idFiledoc" target="_blank" title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                    </div>
                                </div>

                                <div class="clearfix"></div>
                                <div class="col-md-4">
                                    <div class="form-group">

                                        <label>Note: Please upload both side in one page</label>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 extdata" style="display: none">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Detail For Extended Days</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>OPD Receipt Number <span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.extOpdReceiptno, new { @class = "form-control", tabindex = 2 })
                                        @Html.ValidationMessageFor(m => m.extOpdReceiptno, "", new { @class = "text-danger" })

                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>New Inspected Date <span class="text-danger">*</span></label>
                                        @Html.TextBoxFor(m => m.extInspectedDate, new { @class = "form-control datepicker-here", tabindex = 3, @data_language = "en", @readonly = "true", @placeholder = "dd/mm/yyyy" })
                                        @Html.ValidationMessageFor(m => m.extInspectedDate, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Upload OPD Reciept <span class="text-danger">*</span></label>
                                        <div class="fileUpload3">
                                            <span>Upload </span>
                                            @Html.TextBoxFor(m => m.extOpdFile, new { @type = "file", @class = "upload3", @onchange = "UploadFile(this)" })
                                            @Html.HiddenFor(m => m.extOpdFilePath)
                                        </div>
                                        @Html.ValidationMessageFor(m => m.extOpdFile, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-1">
                                    <div class="form-group padding-top-30" id="extOpdFileVALUE" style="display: none;">
                                        @if (Model != null && !string.IsNullOrEmpty(Model.extOpdFilePath))
                                        {
                                            <a href="@Url.Content(Model.extOpdFilePath)" class="extOpdFiledoc" target="_blank"  title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                        else
                                        {
                                            <a href="#" class="extOpdFiledoc" target="_blank" title="Download"><i class="fa fa-2x fa-download"></i></a>
                                        }
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Doctor Name</label>
                                        @Html.TextBoxFor(m => m.extDoctorName, new { @class = "form-control", tabindex = 8, @placeholder = "Doctor Name" })
                                        @Html.ValidationMessageFor(m => m.extDoctorName, "", new { @class = "text-danger" })
                                    </div>
                                </div>


                                <div class="clearfix"></div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Treatment From <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.extTreatmentFrom, new { @class = "datepicker-here form-control F", tabindex = 9, @data_language = "en", @readonly = "true", @onblur = "calDay();", @placeholder = "dd/mm/yyyy" })

                                        @Html.ValidationMessageFor(m => m.extTreatmentFrom, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>Treatment To <span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.extTreatmentto, new { @class = "datepicker-here form-control T", tabindex = 10, @data_language = "en", @onblur = "calDay();", @readonly = "true", @placeholder = "dd/mm/yyyy" })

                                        @Html.ValidationMessageFor(m => m.extTreatmentto, "", new { @class = "text-danger" })
                                    </div>
                                </div>


                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label>No Of Days<span class="star">*</span></label>
                                        @Html.TextBoxFor(m => m.extNoOfDays, new { @class = "form-control", @readonly = "readonly" })
                                        @Html.ValidationMessageFor(m => m.extNoOfDays, "", new { @class = "text-danger" })
                                    </div>
                                </div>





                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <span class="title elipsis">
                                <h4>Undertaking</h4>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <label>
                                        <input id="chkConfirm" name="chkConfirm" type="checkbox" />
                                        <b>I hereby declare that the details furnished above are true and correct to the best of my knowledge and belief and I undertake to inform you of any changes therein, immediately. In case any of the above information is found to be false or untrue or misleading or misrepresenting, I am aware that I may be held liable for it.</b>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row">
                                <div class="form-group">
                                    <div class="col-md-2 col-md-offset-4">
                                        <button id="btnSave" type="button" class="btn btn-block btn-primary">Preview</button>
                                    </div>
                                    <div class="col-md-2">
                                        <a href="@Url.Action("ILCRegistration", "ILC")" class="btn btn-block btn-warning">Reset</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>

        </div>
        <button id="btnShowPopup" type="button" class="btn btn-block btn-warning" data-toggle="modal" data-target=".bs-example-modal-lg" style="display: none;"></button>
        <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"><span id="spanHeading" style="color: #fff;"></span></h4>
                    </div>
                    <div class="modal-body" style="max-height: 470px; overflow-y: auto;">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel-default">
                                    <div class="panel-heading">
                                        <h4>Reason For Application</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Reason</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanReason"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>OPD Receipt Number </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanReceipt"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Uploaded OPD Reciept</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="#" id="spanDocument" target="_blank"><i class="fa fa-download fa-2x"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12">
                                <div class="panel-default">
                                    <div class="panel-heading">
                                        <h4>Select Health Unit</h4>
                                    </div>
                                    <div class="panel-body">

                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Health Unit</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanType"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>District</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanHUDistrict"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Hospital Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanDC"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Doctor Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanDoctor"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Date of Check-up </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanDate"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Treatment From</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanFrom"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Treatment To</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanTo"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Number Of Days For Rest</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanNoOfDays"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Illness Details</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanIllnessDetails"></span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="panel-default">
                                    <div class="panel-heading">
                                        <h4>Personal Details</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Full Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanName"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Father's Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanfatherName"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>DOB</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanDob"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Gender</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanGender"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Category</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanCategory"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Mobile No</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanMobile"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Email Address </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanEmail"></span>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Address  </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanAddress"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>State </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanState"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>District</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanDistrict"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Pincode </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanPincode"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Mark Of Identification </label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanmarkOfIdentification"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="panel-default">
                                    <div class="panel-heading">
                                        <h4>Document</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Photo Id Type</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanidTypeId"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Photo Id Number</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanidNumber"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Id File</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="#" id="spanidFilePath" target="_blank"><i class="fa fa-download fa-2x"></i></a>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12 rev" style="display: none">
                                <div class="panel-default">
                                    <div class="panel-heading">
                                        <h4>Detail Of Extended Days</h4>
                                    </div>
                                    <div class="panel-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>OPD Receipt Number</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextOpdReceiptno"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>New Inspected Date</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextInspectedDate"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>OPD Receipt</label>
                                            </div>
                                            <div class="col-md-6">
                                                <a href="#" id="spanextOpdFilePath" target="_blank"><i class="fa fa-download fa-2x"></i></a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Doctor Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextDoctorName"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Treatment From</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextTreatmentFrom"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Treatment To</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextTreatmentto"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Number Of Days</label>
                                            </div>
                                            <div class="col-md-6">
                                                <span id="spanextNoOfDays"></span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="row">
                            <div class="form-group">
                                <div class="col-md-2 col-md-offset-4">
                                    <button type="submit" class="btn btn-block btn-primary">Submit</button>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-block btn-warning" data-toggle="modal" data-target=".bs-example-modal-lg">Edit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
<script>
    $(document).ready(function () {


        if ('@TempData["msg"]' != '' && '@TempData["msgstatus"]' != '') {
            swal("", '@TempData["msg"]', '@TempData["msgstatus"]');
        }

        if ('@ViewBag.msg' != '' && '@ViewBag.MsgStatus' != '') {
            swal("", '@ViewBag.msg', '@ViewBag.MsgStatus');
        }
        if ('@TempData["AppType"]' == 'Old') {

            $('.extdata').show();
            $('#extPhotoVALUE').show();
            $('#thumbSignVALUE').show();
            $('#idFileVALUE').show();
            $('#opdFileVALUE').show();
            $('#opdReceiptno').attr('readonly', true);
            $('#opdReceiptno').addClass('input-disabled');
            $('#doctorName').attr('readonly', true);
            $('#doctorName').addClass('input-disabled');
            $('#opdDate').attr('readonly', true);
            $('#opdDate').addClass('input-disabled');
            $('#treatmentFrom').attr('readonly', true);
            $('#treatmentFrom').addClass('input-disabled');
            $('#treatmentto').attr('readonly', true);
            $('#treatmentto').addClass('input-disabled');
            $('#illnessDetail').attr('readonly', true);
            $('#illnessDetail').addClass('input-disabled');
            $('#fullName').attr('readonly', true);
            $('#fullName').addClass('input-disabled');
            $('#markOfIdentification').attr('readonly', true);
            $('#markOfIdentification').addClass('input-disabled');

            $('#fatherName').attr('readonly', true);
            $('#fatherName').addClass('input-disabled');
            $('#dob').attr('readonly', true);
            $('#dob').addClass('input-disabled');
            $('#mobileNo').attr('readonly', true);
            $('#mobileNo').addClass('input-disabled');
            $('#emailId').attr('readonly', true);
            $('#emailId').addClass('input-disabled');
            $('#opdAddress').attr('readonly', true);
            $('#opdAddress').addClass('input-disabled');
            $('#opdPincode').attr('readonly', true);
            $('#opdPincode').addClass('input-disabled');
            $('#idNumber').attr('readonly', true);
            $('#idNumber').addClass('input-disabled');

            $("#categoryId").prop("disabled", true);

            $("input[name=rbtnGender]").prop('disabled', true);
            $("input[name=forwardtypeId]").prop('disabled', true);
            $('#healthUnitDistrictId').prop('disabled', true);
            $('#forwardtoId').prop('disabled', true);
            $('#opdStateId').prop('disabled', true);
            $('#opdDistrictId').prop('disabled', true);
            $('#idTypeId').prop('disabled', true);




            $(".oldnew").hide();

        }
        else {
            $(".oldnew").show();
            $(".U").show();
            $('#opdDate').attr('data-language', 'en');
            $('#treatmentFrom').attr('data-language', 'en');
            $('#treatmentto').attr('data-language', 'en');
            $('#dob').attr('data-language', 'en');
            var strDateZ = @DateTime.Now.Year + "/" + @DateTime.Now.Month + "/" + @DateTime.Now.Day + "";
            $('#opdDate').datepicker({

                maxDate: new Date(strDateZ),
                onSelect: function (selectedDate) {
                    var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
                    selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
                    var mindate = new Date(selectedDate);
                    mindate.setDate(mindate.getDate());
                    $("#treatmentFrom").datepicker({ minDate: mindate, autoClose: true });

                },
                autoClose: true
            });
            $('#treatmentFrom').datepicker({

                minDate: new Date(strDateZ),
                onSelect: function (selectedDate) {
                    var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
                    selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
                    var mindate = new Date(selectedDate);
                    mindate.setDate(mindate.getDate() + 1);
                    $("#treatmentto").datepicker({ minDate: mindate, autoClose: true });

                },
                autoClose: true
            });
            $('#treatmentto').datepicker({
                minDate: new Date(strDateZ),
                onSelect: function (selectedDate) {
                    var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
                    selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
                    var maxdate = new Date(selectedDate);
                    maxdate.setDate(maxdate.getDate() - 1);
                    $("#treatmentFrom").datepicker({ maxDate: maxdate, autoClose: true });
                },
                autoClose: true
            });
            $('#dob').datepicker({
                maxDate: new Date(strDateZ),
                autoClose: true
            });
        }
    });

    $('input[name=forwardtypeId]').click(function () {
        $("#lbltype").hide();
    });

    $("#btnSave").click(function () {

        $('#spanValGender').hide();
        $("#lbltype").hide();

        var isShowPopup = true;

        var val = $("#frmdata").validate();
        val.form();
        val.showErrors();

        if (!val.valid()) {
            swal("", "Some mandatory fields are Empty, Kindly check Application Form and fill the required Data.", "warning");
            isShowPopup = false;
            if ($('input[name=forwardtypeId]:checked').length == 0) {
                $("#lbltype").show();
            }

            if ($("input[name='rbtnGender']:checked").length == 0) {
                $('#spanValGender').show();
            }
        }
        else {
            if (!$('#chkConfirm').is(':checked')) {
                isShowPopup = false;
                swal("", "Please check undertaking !", "warning");
            }
        }



        if (isShowPopup) {
            debugger;
            if ($('#oldCertificateNumber').val() == '') {
                $("#spanHeading").text('Application Details for Issuance of Illness Certificate (Illness)');
            }
            else {
                $("#spanHeading").text('Application Details for Issuance of Illness Certificate (Extended)');
            }
            $("#spanName").text($("#fullName").val());
            $("#spanfatherName").text($("#fatherName").val());
            $("#spanDob").text($("#dob").val());
            $("#spanGender").text($("input[type='radio'][name='rbtnGender']:checked").val());
            $("#spanCategory").text($("#categoryId option:selected").text());
            $("#spanMobile").text($("#mobileNo").val());
            $("#spanEmail").text(($("#emailId").val() == '') ? 'NaN' : ($("#emailId").val()));



            $("#spaninsttype").text($("#institutionTypeId option:selected").text());
            $("#spanReceipt").text($("#opdReceiptno").val());
            $("#spanDate").text($("#opdDate").val());
            $("#spanAddress").text($("#opdAddress").val());
            $("#spanState").text($("#opdStateId option:selected").text());
            $("#spanDistrict").text($("#opdDistrictId option:selected").text());

            $("#spanPincode").text(($("#opdPincode").val() == '') ? 'NaN' : ($("#opdPincode").val()));
            $("#spanmarkOfIdentification").text($("#markOfIdentification").val());
            $("#spanIllnessDetails").text($("#illnessDetail").val());
            $('#spanType').text($('input[name=forwardtypeId]:checked').parent().text());

            $("#spanHUDistrict").text($("#healthUnitDistrictId option:selected").text());
            $("#spanDC").text($("#forwardtoId option:selected").text());
            var Doctor = $('#doctorName').val();
            if (Doctor == "") {
                $("#spanDoctor").text('NaN');
            }
            else {

                $("#spanDoctor").text($("#doctorName").val());
            }

            $("#spanFrom").text($("#treatmentFrom").val());
            $("#spanTo").text($("#treatmentto").val());
            $("#spanNoOfDays").text($("#NoOfDays").val());
            $("#spanReason").text($("#reason").val());
            $("#spanRemark").text($("#remarks").val());
            var certificate = $('#opdFilePath').val().split('/');
            var url1 = '@Url.Content("~/Content/writereaddata/ILC/")' + certificate[certificate.length - 1];
            $('#spanDocument').removeAttr('href');
            $('#spanDocument').attr('href', url1);




            $("#spanidTypeId").text($("#idTypeId option:selected").text());
            $("#spanidNumber").text(($("#idNumber").val() == '') ? 'NaN' : ($("#idNumber").val()));

            var idFilecer = $('#idFilePath').val().split('/');
            var url2 = '@Url.Content("~/Content/writereaddata/ILC/")' + idFilecer[idFilecer.length - 1];
            $('#spanidFilePath').removeAttr('href');
            $('#spanidFilePath').attr('href', url2);


            var extOpdReceiptno = $("#extOpdReceiptno").val();
            if (extOpdReceiptno == "") {

            }
            else {
                $('.rev').show();
                $("#spanextOpdReceiptno").text($("#extOpdReceiptno").val());
                $("#spanextInspectedDate").text($("#extInspectedDate").val());

                var extOpdFilecer = $('#extOpdFilePath').val().split('/');
                var url3 = '@Url.Content("~/Content/writereaddata/ILC/")' + extOpdFilecer[extOpdFilecer.length - 1];
                $('#spanextOpdFilePath').removeAttr('href');
                $('#spanextOpdFilePath').attr('href', url3);
                $("#spanextDoctorName").text(($("#extDoctorName").val() == '') ? 'NaN' : ($("#extDoctorName").val()));

                $("#spanextTreatmentFrom").text($("#extTreatmentFrom").val());
                $("#spanextTreatmentto").text($("#extTreatmentto").val());
                $("#spanextNoOfDays").text($("#extNoOfDays").val());
            }


            $('#btnShowPopup').click();
            setTimeout(function () {
                $('.modal-body').scrollTop(0);
            }, 300);
        }
    });


    $("#btnSearch").click(function () {


        if ($("#oldCertificateNumber").val().trim() != '' && $("#oldCertificateNumber").val().trim() != null) {
            bindDataForRevisedCertificate($("#oldCertificateNumber").val());
        }
        else {
            swal("", 'Enter Certificate Number!', "warning");
        }
    });

    function bindDataForRevisedCertificate(_oldCertificateNumber) {
        debugger;
        var img = "<img src='@Url.Content("~/Images/loadingImg.gif")' alt='Loading..' style='margin-left:40%; margin-top:25px' />";
        $('#DIV-ApplicationList').html(img);

        $.ajax({
            url: '@Url.Action("GetILCdetailByCertNo", "ILC")',
            data: { oldCertificateNumber: _oldCertificateNumber },
            type: 'GET',
            dataType: 'json'
        })
        .success(function (returndata) {
            debugger;
            if (returndata != null && returndata != '') {

                if (returndata.Msg == "3") {
                    swal("", 'Given Certificate Number is already used for Illness to Fitness Certificate!', "warning");
                    $(".oldnew").hide();
                }
                else if (returndata.Msg == "2") {
                    swal("", 'Please Enter Your Latest Certificate Number!', "warning");
                    $(".oldnew").hide();
                }
                else if (returndata.Msg == "4") {
                    swal("", 'Details not found for given Certificate Number!', "warning");
                    $(".oldnew").hide();
                }
                else {

                    $(".oldnew").show();
                    $('#regisIdILC ').val(returndata.regisIdILC);
                    $('#regByUser').val(returndata.regByUser);
                    $('#reason').val(returndata.reason);
                    $('#opdReceiptno').val(returndata.opdReceiptno);

                    $("input[name=forwardtypeId][value=" + returndata.forwardtypeId + "]").prop('checked', true);
                    $('#hdnforwardtypeId ').val(returndata.forwardtypeId);
                    $('#healthUnitDistrictId ').val(returndata.healthUnitDistrictId);
                    $('#doctorName').val(returndata.doctorName);
                    $('#opdDate').val(returndata.opdDate);
                    $('#treatmentFrom').val(returndata.treatmentFrom);
                    $('#treatmentto').val(returndata.treatmentto);
                    $('#NoOfDays').val(returndata.NoOfDays);
                    $('#illnessDetail').val(returndata.illnessDetail);
                    $('a.opdFiledoc').attr("href", returndata.opdFilePath.replace("~/", "/"));
                    $('#opdFilePath').val(returndata.opdFilePath);
                    $('#fullName').val(returndata.fullName);
                    $('#fatherName').val(returndata.fatherName);
                    $('#dob').val(returndata.dob);

                    $("input[name=rbtnGender][value=" + returndata.gender + "]").attr('checked', true);
                    $('#categoryId ').val(returndata.categoryId);
                    $('#mobileNo').val(returndata.mobileNo);
                    $('#emailId').val(returndata.emailId);
                    $('#opdAddress').val(returndata.opdAddress);
                    $('#opdStateId').val(returndata.opdStateId);

                    $('#opdPincode').val(returndata.opdPincode);

                    $('#markOfIdentification').val(returndata.markOfIdentification);
                    $('#idTypeId ').val(returndata.idTypeId);
                    $('#idNumber').val(returndata.idNumber);
                    $('a.idFiledoc').attr("href", returndata.idFilePath.replace("~/", "/"));
                    $('#idFilePath').val(returndata.idFilePath);
                    $('#hdnDistId').val(returndata.opdDistrictId);
                    binddropdown(returndata.forwardtypeId, returndata.healthUnitDistrictId);
                    $("#forwardtoId ").val(returndata.forwardtoId);
                    if (returndata.opdDistrictId != '') {
                        binddist(returndata.opdStateId);
                    }

                }
            }
            else {
                swal("", 'Details not found for given Certificate Number!', "warning");
                $(".oldnew").hide();
            }
        })
        .error(function (xhr, status) {
            swal("", 'Details not found for given Certificate Number!', "warning");
            $(".oldnew").hide();
        });
    }

    function UploadFile(Obj) {
        var ext = Obj.value.match(/\.(.+)$/)[1];
        var Id = $(Obj).attr("Id");

        switch (ext) {
            case 'pdf':
            case 'jpg':
                var fileSize = ($("#" + Id)[0].files[0].size / 1024 / 1024);
                if (fileSize > 2) {
                    swal("", "Maximum 2MB file size are allowed", "warning");
                    return false;
                }
                else {
                    var data = new FormData();
                    var files = $("#" + Id).get(0).files;
                    if (files.length > 0) {
                        data.append("File", files[0]);
                    }
                    $.ajax({
                        url: '@Url.Action("UploadFile", "ILC")',
                        type: "POST",
                        processData: false,
                        contentType: false,
                        data: data,
                        success: function (response) {
                            $("#" + Id + "Path").val(response[1]);


                            $("#" + Id + "VALUE").show();
                            var Url = response[1].replace('~/', '');
                            $("." + Id + "doc").prop('href', '@Url.Content("~/")' + Url + '?' + new Date().getTime().toString());
                            return false;
                        },
                        error: function () {

                        }
                    });

                }
                break;
            default:
                swal("", 'Invalid File Format only pdf and jpg files are allowed!', "warning");
                this.value = '';
                return false;
        }
    }



    var strDate = @DateTime.Now.Year + "/" + @DateTime.Now.Month + "/" + @DateTime.Now.Day + "";

    $('#extInspectedDate').datepicker({

        maxDate: new Date(strDate),
        onSelect: function (selectedDate) {
            if (IsSecondDateGreater(selectedDate, $('#opdDate').val())) {
                swal("", "New Inspection Date must be greater than Date Of Check-Up", "warning");
                $('#extInspectedDate').val('');
            }
            var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
            selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
            var mindate = new Date(selectedDate);
            mindate.setDate(mindate.getDate());
            $("#extTreatmentFrom").datepicker({ minDate: mindate, autoClose: true });

        },
        autoClose: true
    });
    $('#extTreatmentFrom').datepicker({
        minDate: new Date(strDate),
        onSelect: function (selectedDate) {
            var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
            selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
            var mindate = new Date(selectedDate);
            mindate.setDate(mindate.getDate() + 1);
            $("#extTreatmentto").datepicker({ minDate: mindate, autoClose: true });
        },
        autoClose: true
    });
    $('#extTreatmentto').datepicker({
        minDate: new Date(strDate),
        onSelect: function (selectedDate) {
            var mydatematch = selectedDate.match(/(\d+)\/(\d+)\/(\d+)/);
            selectedDate = new Date(mydatematch[3], mydatematch[2] - 1, mydatematch[1]);
            var maxdate = new Date(selectedDate);
            maxdate.setDate(maxdate.getDate() - 1);
            $("#extTreatmentFrom").datepicker({ maxDate: maxdate, autoClose: true });
        },
        autoClose: true
    });
    $("#healthUnitDistrictId").change(function () {
        binddropdown($("input[name=forwardtypeId]:checked").val(), $(this).val());
    });

    $("input[name=forwardtypeId]").change(function () {
        binddropdown($(this).val(), $("#healthUnitDistrictId").val());
    });

    function binddropdown(Id, distId) {

        $.ajax({
            url: '@Url.Action("BindForwardDropdownlist", "ILC")',
            data: { rollId: Id, opdDistrictId: distId },
            type: 'GET',
            async: false,
            dataType: 'json',
            success: function (data) {
                $("#forwardtoId").empty();
                $("#forwardtoId").append('<option value="">--Select--</option>');
                $.each(data, function (id, result) {
                    $("#forwardtoId").append('<option value="' + result.Value + '">' + result.Text + '</option>');
                })
            },
            error: function (xhr, status) {
                $("#forwardtoId").empty();
                $("#forwardtoId").append('<option value="">--Select--</option>');
            }
        });
    }
    function isNumberKey(evt) {
        debugger;
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;
        return true;
    }
    function isalphabet(evt) {
        debugger;
        var charCode = (evt.which) ? evt.which : event.keyCode

        if (!(charCode >= 65 && charCode <= 120) && (charCode != 32 && charCode != 0))
            return false;
        return true;
    }


    function calDay() {
        debugger;

        to = $('.T').val();
        frm = $('.F').val();

        if (frm != '' && to != '') {

            calDays(frm, to);

        }
    };
    function calDayDiff() {
        debugger;

        to = $('.tt').val();
        frm = $('.tf').val();

        if (frm != '' && to != '') {

            calDaysdiff(frm, to);

        }
    };
    function calDays(date1, date2) {
        debugger;
        if (date1 != '' && date2 != '') {

            var d = new Date(date1.split("/").reverse().join("/"));

            var dd = d.getDate();
            var mm = d.getMonth() + 1;
            var yy = d.getFullYear();
            var edate = yy + "-" + mm + "-" + dd;


            var d2 = new Date(date2.split("/").reverse().join("/"));
            var dd = d2.getDate();
            var mm = d2.getMonth() + 1;
            var yy = d2.getFullYear();
            var sdate = yy + "-" + mm + "-" + dd;

            var startDate = Date.parse(sdate);
            var endDate = Date.parse(edate);

            var timeDiff = startDate - endDate;
            daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));



            $("#extNoOfDays").val(daysDiff + 1);

        }
        else {

            $("#extNoOfDays").val('');

        }
    }
    function calDaysdiff(date1, date2) {
        debugger;
        if (date1 != '' && date2 != '') {

            var d = new Date(date1.split("/").reverse().join("/"));

            var dd = d.getDate();
            var mm = d.getMonth() + 1;
            var yy = d.getFullYear();
            var edate = yy + "-" + mm + "-" + dd;


            var d2 = new Date(date2.split("/").reverse().join("/"));
            var dd = d2.getDate();
            var mm = d2.getMonth() + 1;
            var yy = d2.getFullYear();
            var sdate = yy + "-" + mm + "-" + dd;

            var startDate = Date.parse(sdate);
            var endDate = Date.parse(edate);

            var timeDiff = startDate - endDate;
            daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            //alert(daysDiff)


            $("#NoOfDays").val(daysDiff + 1);

        }
        else {
            //alert();
            $("#NoOfDays").val('');

        }
    }
    function IsSecondDateGreater(firstDate, secondDate) {
        var date1 = firstDate;
        var d = new Date(date1.split("/").reverse().join("/"));

        var dd = d.getDate();
        var mm = d.getMonth() + 1;
        var yy = d.getFullYear();
        var edate = yy + "-" + mm + "-" + dd;

        var date2 = secondDate;
        var d2 = new Date(date2.split("/").reverse().join("/"));
        var dd = d2.getDate();
        var mm = d2.getMonth() + 1;
        var yy = d2.getFullYear();
        var sdate = yy + "-" + mm + "-" + dd;

        debugger;

        var startDate = Date.parse(sdate);

        var endDate = Date.parse(edate);

        if (d2 > d) {
            return true;
        }
    }
    $("#opdStateId").change(function () {
        binddist($("#opdStateId").val());
    })
    function binddist(opdStateId) {
        debugger;
        $.ajax({
            type: 'GET',
            url: '@Url.Action("binddist", "ILC")',
            data: { opdStateId: opdStateId },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                $("#opdDistrictId").empty();
                $("#opdDistrictId").append("<option value=''>--Select--</option>")
                $.each(data, function (i, result) {
                    $("#opdDistrictId").append("<option value='" + result.Value + "'>" + result.Text + "</option>")
                });
                $("#opdDistrictId").val($('#hdnDistId').val());
            },
            failure: function () {
                alert("Failed!");
            }
        });
    }
</script>
